set t_Co=256

set encoding=utf8                   " UTF8
syntax enable                       " èªæ³•ä¸Šè‰²
set number                          " é¡¯ç¤ºè¡Œè™Ÿ
set softtabstop=2                   " ä½¿å¾—æŒ‰é€€æ ¼éµæ™‚å¯ä»¥ä¸€æ¬¡åˆªæ‰2å€‹ç©ºæ ¼
set shiftwidth=2                    " è¨­å®šç¸®æ’é•·åº¦çˆ²2çš„æ–¹æ³• 
set expandtab                       " ä½¿ç”¨ç©ºç™½å–ä»£Tab
set tabstop=4                       " è¨­å®štabé•·åº¦çˆ²4
set backspace=2                     " åœ¨insertæ¨¡å¼å•Ÿç”¨backspaceéµï¼Œçµ¦Macä½¿ç”¨çš„ï¼ŒWindows and Linuxä¸ç”¨è¨­å®š

set ic                              " æœå°‹ä¸åˆ†å¤§å°å¯«
"set scrolloff=3                     " æ²å‹•æ™‚ä¿ç•™åº•ä¸‹3è¡Œ

"set relativenumber                  " é¡¯ç¤ºç›¸å°è¡Œè™Ÿ(ä»¥æ¸¸æ¨™ç‚ºä¸­å¿ƒé»ï¼Œå‘ä¸Šä¸‹é–‹å§‹ç·¨è™Ÿ)
"set ai                              " è¨­å®šè‡ªå‹•ç¸®æ’ï¼Œä½†è²¼å»ä¸åŒçš„åœ°æ–¹æ™‚å¯èƒ½æœƒäº‚æ‰ï¼Œé€™æ™‚å¯ä»¥æ‰‹å‹•åˆ‡æ›è‡³è²¼ä¸Šæ¨¡å¼ :set paste å†é€²è¡Œè²¼ä¸Š
"set background=dark                 " å•Ÿç”¨æš—è‰²èƒŒæ™¯
"set bg=light                        " å•Ÿç”¨äº®è‰²èƒŒæ™¯
"set cursorline                      " çªå‡ºé¡¯ç¤ºç•¶å‰è¡Œ(æ°´å¹³)
"set cursorcolumn                    " é«˜äº®ç•¶å‰åˆ—(å‚ç›´)

"set ruler                           " è¨­å®šå°ºè¦ï¼Œè¨­å®šå®Œç•¢å³ä¸‹æ–¹æœƒå‡ºç¾ä¸€å€‹é€™æ¨£çš„æ±è¥¿ï¼Œé¡¯ç¤ºæª”åã€ç¸½è¡Œæ•¸ã€ç¸½å­—å…ƒæ•¸ã€ç›®å‰ç¬¬å¹¾è¡Œã€åœ¨ç¬¬å¹¾å€‹å­—å…ƒã€åœ¨æ–‡ç« çš„ä»€éº¼ä½ç½®ï¼Œä½†ä½ æœ‰è¨­å®šPowerlineçš„æ™‚å€™å°±ç”¨ä¸åˆ°äº†
set showmatch                       " é¡¯ç¤ºæ‹¬è™Ÿé…å°æƒ…æ³
set nocompatible                    " è®“vimåœ¨éç›¸å®¹æ¨¡å¼ä¸‹å·¥ä½œ(ä¸ç›¸å®¹vi)
set incsearch                       " æœç´¢æ™‚åœ¨æœªå®Œå…¨è¼¸å…¥å®Œç•¢è¦æª¢ç´¢çš„æ–‡æœ¬æ™‚å°±é–‹å§‹æª¢ç´¢ï¼Œå¯ä»¥ä½¿ç”¨ ctrl+n ä¾†é”æˆè‡ªå‹•è£œå®Œçš„åŠŸèƒ½
set hlsearch
set formatoptions+=r                " è‡ªå‹•è¨»è§£
setglobal fileencoding=utf-8        " ç”¨ä¾†è¨­å®šç‰¹å®šæª”æ¡ˆçš„ç·¨ç¢¼ï¼Œä½¿ç”¨setglobal å¯ä»¥è¨­å®šå®ƒçš„é è¨­å€¼ï¼Œfileencodingè‹¥è¨­å®šç‚ºç©ºå­—ä¸²å‰‡è¡¨ç¤ºè·Ÿ encoding æ‰€æŒ‡å®šçš„ç·¨ç¢¼æ–¹å¼ç›¸åŒ

set autoindent
set ignorecase
set hidden

"autocmd Filetype html,xml,eruby,javascript,css,scss setlocal ts=4 sts=4 sw=4
"autocmd Filetype ruby,yaml,snippets setlocal ts=2 sts=2 sw=2

" Key Mapping
" inoremap  triger_char  mapping_str
" æ˜ å°„æŒ‡ä»¤     è§¸ç™¼å­—å…ƒ     æ˜ å°„å­—ä¸²
" è¨»ï¼š<LEFT> ç‚ºå‘å³éµå­—å…ƒï¼Œ<CR>ä»£è¡¨æ›è¡Œï¼Œ<ESC>è·³å‡º
" å¦å¤–inoremapå¾Œé¢ç„¡æ³•å†ä½¿ç”¨"é›™å¼•è™Ÿä¾†è¨»è§£

let mapleader = ","
let g:mapleader = ","
cnoreabbrev Ack Ack!
nnoremap <Leader>a :Ack!<Space>
nnoremap <Leader>a :Rg<Space>
map <Leader>d :NERDTreeToggle<CR>
nnoremap <Leader>g :NERDTreeFind<CR>
let g:NERDTreeDirArrowExpandable = 'ğŸ˜'
let g:NERDTreeDirArrowCollapsible = 'ğŸ¤£'
nnoremap <leader>gb :Git blame<CR>
nnoremap <leader>gm <Plug>(git-messenger)

imap kl <Esc>
nnoremap ok :w<CR>

nnoremap <Leader>b :bp<CR>
nnoremap <Leader>n :bn<CR>
nnoremap <Leader>l :ls<CR> "é€šéç´¢å¼•å¿«é€Ÿè·³è½‰
nnoremap <Leader>1 :1b<CR>
nnoremap <Leader>2 :2b<CR>
nnoremap <Leader>3 :3b<CR>
nnoremap <Leader>4 :4b<CR>
nnoremap <Leader>5 :5b<CR>
nnoremap <Leader>6 :6b<CR>
nnoremap <Leader>7 :7b<CR>
nnoremap <Leader>8 :8b<CR>
nnoremap <Leader>9 :9b<CR>
nnoremap <Leader>0 :10b<CR>

"nnoremap <silent> <leader>e :FZF -m<CR>
nnoremap <leader>e :FZF -m<CR>
nnoremap <leader>f :Files<CR>
nnoremap <leader>m :BTags<CR>
nnoremap <leader>t :Tags<CR>

"map <C-n> :VimMultipleCursors<CR>
"let g:multi_cursor_next_key='<C-n>'
"let g:multi_cursor_prev_key='<C-p>'
"let g:multi_cursor_skip_key='<C-x>'
"let g:multi_cursor_quit_key='<Esc>'

"airline{
let g:airline#extensions#tabline#enabled = 1
let g:airline_theme="luna"
set t_Co=256
set laststatus=2
"}

let g:vimrubocop_keymap = 0
nmap <Leader>r :RuboCop<CR>

call plug#begin('~/.vim/plugged')
Plug 'junegunn/fzf', { 'dir': '~/.fzf', 'do': './install --bin' }
Plug 'junegunn/fzf.vim'
Plug 'easymotion/vim-easymotion'
Plug 'scrooloose/nerdtree', { 'on': 'NERDTreeToggle' }
Plug 'mileszs/ack.vim'
Plug 'tpope/vim-fugitive'
Plug 'rhysd/git-messenger.vim'
Plug 'neoclide/coc.nvim', {'branch': 'release'}
"Plug 'jiangmiao/auto-pairs'
"Plug 'KurtPreston/vim-autoformat-rails'
"Plug 'vim-airline/vim-airline'
"Plug 'vim-airline/vim-airline-themes'
"Plug 'ctrlpvim/ctrlp.vim'
"Plug 'terryma/vim-multiple-cursors'
"Plug 'wakatime/vim-wakatime'
"Plug 'rstacruz/sparkup'
"Plug 'editorconfig/editorconfig-vim'
"Plug 'tpope/vim-rails'
"Plug 'rubocop-hq/vim-rubocop'
call plug#end()
"Plug 'Valloric/YouCompleteMe'

"å•Ÿç”¨mouse supportï¼Œå¯ä»¥ç”¨æ»‘é¼ ã€è§¸æ§æ¿æ§åˆ¶æ¸¸æ¨™ï¼Œä»¥åŠä¸Šä¸‹æ²å‹•ç•«é¢
"set mouse=a


" coc.nvim å¿«æ·éµé…ç½®
inoremap <silent><expr> <TAB>
  \ coc#pum#visible() ? coc#pum#next(1) :
  \ <SID>check_back_space() ? "\<Tab>" :
  \ coc#refresh()
inoremap <expr><S-TAB> coc#pum#visible() ? coc#pum#prev(1) : "\<C-h>"

function! s:check_back_space() abort
  let col = col('.') - 1
  return !col || getline('.')[col - 1]  =~# '\s'
endfunction

" ä½¿ç”¨ <c-space> è§¸ç™¼è‡ªå‹•å®Œæˆ
if has('nvim')
  inoremap <silent><expr> <c-space> coc#refresh()
else
  inoremap <silent><expr> <c-@> coc#refresh()
endif

" Go to Definition
nmap <leader>gd <Plug>(coc-definition)
nmap <leader>gy <Plug>(coc-type-definition)
nmap <leader>gi <Plug>(coc-implementation)
nmap <leader>gr <Plug>(coc-references)

" Rename Symbolï¼ˆé‡æ§‹æ”¹åï¼‰
nmap <leader>rn <Plug>(coc-rename)

" Format Selected Code
xmap <leader>f <Plug>(coc-format-selected)
nmap <leader>f <Plug>(coc-format-selected)

" Show Error Hover Info
nnoremap <silent> K :call ShowDocumentation()<CR>

function! ShowDocumentation()
  if CocAction('hasProvider', 'hover')
    call CocActionAsync('doHover')
  else
    call feedkeys('K', 'in')
  endif
endfunction

" è‡ªå‹•é¡¯ç¤º LSP è¨ºæ–·ä¿¡æ¯
set signcolumn=yes
autocmd CursorHold * silent call CocActionAsync('highlight')
